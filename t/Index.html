<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hustensaft Backend Panel</title>
<style>
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        background-color: #1e1e1e;
        color: white;
        display: flex;
    }
    /* Sidebar */
    .sidebar {
        width: 220px;
        background: #111;
        height: 100vh;
        padding: 20px 0;
        position: fixed;
        top: 0;
        right: 0;
        display: flex;
        flex-direction: column;
        gap: 10px;
    }
    .sidebar button {
        background: #222;
        color: white;
        border: none;
        padding: 12px;
        text-align: left;
        cursor: pointer;
        font-size: 14px;
        transition: background 0.2s;
    }
    .sidebar button:hover {
        background: #444;
    }
    /* Content */
    .content {
        margin-right: 220px;
        padding: 20px;
        flex: 1;
    }
    .hidden {
        display: none;
    }
    iframe {
        width: 100%;
        height: 80vh;
        border: none;
        border-radius: 6px;
        background: white;
    }
    .card {
        background: #2c2c2c;
        padding: 15px;
        border-radius: 6px;
        margin-bottom: 20px;
    }
    .badge {
        padding: 5px 10px;
        border-radius: 4px;
        color: white;
        font-size: 12px;
    }
    .online {
        background: green;
    }
    .offline {
        background: red;
    }
</style>
</head>
<body>

<div id="loginPage" class="content">
    <h2>Login</h2>
    <p>Bitte mit Discord-Namen und Passwort einloggen.</p>
    <input type="text" id="username" placeholder="Discord Name"><br><br>
    <input type="password" id="password" placeholder="Passwort"><br><br>
    <button onclick="login()">Login</button>
    <p id="loginError" style="color:red;"></p>
</div>

<div id="panelPage" class="hidden content">
    <h2>Willkommen, <span id="userDisplay"></span></h2>
    <div id="mainContent"></div>
</div>

<div id="sidebar" class="hidden sidebar">
    <button onclick="showStart()">üè† Startseite</button>
    <button id="leitfadenBtn" class="hidden" onclick="showLeitfaden()">üìÑ Leitfaden</button>
    <button id="fahrauftraegeBtn" class="hidden" onclick="showFahrauftraege()">üöå Fahrauftr√§ge</button>
</div>

<script>
const users = [
    { name: "Maxim", password: "pass123", role: 5 },
    { name: "Lukas", password: "modpass", role: 2 },
    { name: "Peter", password: "fahrerpass", role: 0 }
];

// Google Docs Links
const leitfaeden = {
    1: "https://docs.google.com/document/d/11j1MOWyH0TlsqH7BHEaI1hp0KZUWSJaGTUhaxPPJqTo/edit",
    2: "https://docs.google.com/document/d/11j1MOWyH0TlsqH7BHEaI1hp0KZUWSJaGTUhaxPPJqTo/edit",
    3: "https://docs.google.com/document/d/11j1MOWyH0TlsqH7BHEaI1hp0KZUWSJaGTUhaxPPJqTo/edit",
    4: "https://docs.google.com/document/d/12sE18a_Y0g_cr9T-MNfKtJxHbHyGM8z0VJxH_dOgJdQ/edit"
};
const fahrauftraege = [
    "https://docs.google.com/document/d/1example1/edit",
    "https://docs.google.com/document/d/1example2/edit"
];

let currentUser = null;

function login() {
    const uname = document.getElementById("username").value.trim();
    const pass = document.getElementById("password").value.trim();
    const user = users.find(u => u.name === uname && u.password === pass);
    if (!user) {
        document.getElementById("loginError").innerText = "Falscher Name oder Passwort!";
        return;
    }
    currentUser = user;
    document.getElementById("loginPage").classList.add("hidden");
    document.getElementById("panelPage").classList.remove("hidden");
    document.getElementById("sidebar").classList.remove("hidden");
    document.getElementById("userDisplay").innerText = currentUser.name;

    // Sidebar Rollen-Logik
    if (currentUser.role >= 1 && currentUser.role <= 4) {
        document.getElementById("leitfadenBtn").classList.remove("hidden");
    }
    if (currentUser.role === 0 || currentUser.role === 5) {
        document.getElementById("fahrauftraegeBtn").classList.remove("hidden");
    }
    if (currentUser.role === 5) {
        document.getElementById("leitfadenBtn").classList.remove("hidden");
    }
    showStart();
}

function showStart() {
    fetch(`https://api.mcsrvstat.us/2/play.hustensaft.org`)
        .then(res => res.json())
        .then(data => {
            let status = data.online 
                ? `<span class="badge online">Online</span>` 
                : `<span class="badge offline">Offline</span>`;
            let players = data.online ? `${data.players.online}/${data.players.max}` : "0";
            document.getElementById("mainContent").innerHTML = `
                <div class="card">
                    <h3>Minecraft Serverstatus</h3>
                    <p>Status: ${status}</p>
                    <p>Spieler online: ${players}</p>
                </div>
            `;
        });
}

function showLeitfaden() {
    if (currentUser.role === 5) {
        // Liste aller Leitf√§den
        let html = "<h3>Alle Leitf√§den</h3><ul>";
        for (let r in leitfaeden) {
            html += `<li><a href="${leitfaeden[r]}" target="_blank">Leitfaden Rolle ${r}</a></li>`;
        }
        html += "</ul>";
        document.getElementById("mainContent").innerHTML = html;
    } else {
        // Nur eigener Leitfaden im Embed
        document.getElementById("mainContent").innerHTML = `
            <iframe src="${leitfaeden[currentUser.role]}"></iframe>
        `;
    }
}

function showFahrauftraege() {
    let html = "<h3>Fahrauftr√§ge</h3><ul>";
    fahrauftraege.forEach(link => {
        html += `<li><a href="${link}" target="_blank">${link.split("/d/")[1].split("/")[0]}</a></li>`;
    });
    html += "</ul>";
    document.getElementById("mainContent").innerHTML = html;
}
</script>

</body>
</html>
